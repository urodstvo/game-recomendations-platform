{% extends 'game_app/base.html' %}
{% load static %}
{% load custom_tags %}
{% load l10n %}
{% block css %}
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link type='text/css' rel="stylesheet" href="{% static 'game_app/css/general.css' %}" />
    <title>LAB8</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script>
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawLINE1);
      google.charts.setOnLoadCallback(drawLINE2);
      google.charts.setOnLoadCallback(drawLINE3);

      function drawLINE1() {
        var data = google.visualization.arrayToDataTable([
          ['Месяц', 'Фактическое значение', 'Линейная модель', 'Параболическая модель', 'Показательная модель'],{% for key, value in model1.items %}
          ["{{key}}", {{ value.0|unlocalize }}, {{ value.1|unlocalize }}, {{ value.2|unlocalize }}, {{ value.3|unlocalize }}],{% endfor %}
        ]);

        var options = {
          title: 'График динамики выхода игр за {{ year }} год',
          curveType: 'function',
          legend: { position: 'bottom' }
        };

        var chart = new google.visualization.LineChart(document.getElementById('line1'));

        chart.draw(data, options);
      }

      function drawLINE2() {
        var data = google.visualization.arrayToDataTable([
          ['Месяц', 'Фактическое значение', 'Линейная модель', 'Параболическая модель', 'Показательная модель'],{% for key, value in model2.items %}
          ["{{key}}", {{ value.0|unlocalize }}, {{ value.1|unlocalize }}, {{ value.2|unlocalize }}, {{ value.3|unlocalize }}],{% endfor %}
        ]);

        var options = {
          title: 'График динамики регистраций новых пользователей за последние 12 месяцев',
          curveType: 'function',
          legend: { position: 'bottom' }
        };

        var chart = new google.visualization.LineChart(document.getElementById('line2'));

        chart.draw(data, options);
      }

      function drawLINE3() {
        var data = google.visualization.arrayToDataTable([
          ['Месяц', 'Фактическое значение', 'Линейная модель', 'Параболическая модель', 'Показательная модель'],{% for key, value in model3.items %}
          ["{{key}}", {{ value.0|unlocalize }}, {{ value.1|unlocalize }}, {{ value.2|unlocalize }}, {{ value.3|unlocalize }}],{% endfor %}
        ]);

        var options = {
          title: 'График динамики активности добавления игр в личные библиотеки за последние 12 месяцев',
          curveType: 'function',
          legend: { position: 'bottom' }
        };

        var chart = new google.visualization.LineChart(document.getElementById('line3'));

        chart.draw(data, options);
      }


    </script>
{% endblock %}
{% block main %}
    <style>
        main
        {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            flex-direction: column;
        }

        main div
        {
            margin-bottom: 40px;
        }

        table
        {
            width: 100%;
            text-align: center;
            border-color: orange;
        }

        .inner td
        {
            width: 50%;
        }

        td
        {
            border: 1px solid orange;
        }

        td:has( > table)
        {
            border: none;
        }

        .main
        {
            border: 1px solid orange;
            margin: 20px 0;
            background-color: #222;
        }


    </style>
<main>
    <div>
        <table class="main">
            <tr>
                <td>
                    t
                </td>
                {% for key, value in line.items %}
                    <td>{{ key }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td>
                    Yt
                </td>
                {% for key, value in line.items %}
                     <td>{{ value }}</td>
                {% endfor %}
            </tr>
        </table>
        <table class="main">
            <tr>
                <td>
                    t
                </td>
                {% for key, value in table11.items %}
                    <td>{{ key }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td>
                    Yt
                </td>
                {% for key, value in table11.items %}
                     <td>{{ value }}</td>
                {% endfor %}
            </tr>
        </table>
        Количество серий = {{ n11 }}
        <br>
        Длина самой длинной серии = {{ max11 }}
        <br>
        Медиана = {{ me1 }}
        <br>
        Проверка по притерию серий:
        <br>
        {{ n11 }} > {{ result1 }}
        <br>
        {{ max11 }} < {{ tautau }}
        <br>
        В итоге: {% if result11 %} Гипотеза об отсутствии тренда принимается {% else %} Гипотеза об отсутствии тренда отвергается {% endif %}
        <br><br>
        <table class="main">
            <tr>
                <td>
                    t
                </td>
                {% for key, value in table1.items %}
                    <td>{{ key }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td>
                    Yt
                </td>
                {% for key, value in table1.items %}
                     <td>{{ value }}</td>
                {% endfor %}
            </tr>
        </table>
        Количество серий = {{ n1 }}
        <br>
        Длина самой длинной серии = {{ max1 }}
        <br>
        Проверка по притерию "восходящих и нисходящих":
        <br>
        {{ n1 }} > {{ result2 }}
        <br>
        {{ max1 }} < {{ tau }}
        <br>
        В итоге: {% if result12 %} Гипотеза об отсутствии тренда принимается {% else %} Гипотеза об отсутствии тренда отвергается {% endif %}
        <br><br>
        <table class="main">
            <tr>
                <td>№</td>
                <td>y(t)</td>
                <td>t</td>
                <td>y(t)t</td>
                <td>t^2</td>
                <td>y(t)t^2</td>
                <td>t^4</td>
                <td>ln(y(t))</td>
                <td>ln(y(t))t</td>
            </tr>
            {% for key, value in bigtable1.items %}
            <tr>
                <td>{{ key }}</td>
                <td>{{ value.0 }}</td>
                <td>{{ value.1 }}</td>
                <td>{{ value.2 }}</td>
                <td>{{ value.3 }}</td>
                <td>{{ value.4 }}</td>
                <td>{{ value.5 }}</td>
                <td>{{ value.6 }}</td>
                <td>{{ value.7 }}</td>
            </tr>
            {% endfor %}
        </table>
        Линейная модель = {{ line1 }} <br>
        Параболическая модель = {{ parabola1 }} <br>
        Показательная модель = {{ pokaz1 }}
        <br><br>
        <div id="line1" style="width: 1500px; height: 600px;"></div>
    </div>
    <div>
        <table class="main">
            <tr>
                <td>
                    t
                </td>
                {% for key, value in users.items %}
                    <td>{{ key }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td>
                    Yt
                </td>
                {% for key, value in users.items %}
                     <td>{{ value }}</td>
                {% endfor %}
            </tr>
        </table>
        <table class="main">
            <tr>
                <td>
                    t
                </td>
                {% for key, value in table21.items %}
                    <td>{{ key }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td>
                    Yt
                </td>
                {% for key, value in table21.items %}
                     <td>{{ value }}</td>
                {% endfor %}
            </tr>
        </table>
        Количество серий = {{ n21 }}
        <br>
        Длина самой длинной серии = {{ max21 }}
        <br>
        Медиана = {{ me2 }}
        <br>
        Проверка по притерию серий:
        <br>
        {{ n21 }} > {{ result1 }}
        <br>
        {{ max21 }} < {{ tautau }}
        <br>
        В итоге: {% if result21 %} Гипотеза об отсутствии тренда принимается {% else %} Гипотеза об отсутствии тренда отвергается {% endif %}
        <br><br>
        <table class="main">
            <tr>
                <td>
                    t
                </td>
                {% for key, value in table2.items %}
                    <td>{{ key }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td>
                    Yt
                </td>
                {% for key, value in table2.items %}
                     <td>{{ value }}</td>
                {% endfor %}
            </tr>
        </table>
        Количество серий = {{ n2 }}
        <br>
        Длина самой длинной серии = {{ max2 }}
        <br>
        Проверка по притерию "восходящих и нисходящих":
        <br>
        {{ n2 }} > {{ result2 }}
        <br>
        {{ max2 }} < {{ tau }}
        <br>
        В итоге: {% if result22 %} Гипотеза об отсутствии тренда принимается {% else %} Гипотеза об отсутствии тренда отвергается {% endif %}
        <br><br>
        <div id="line2" style="width: 1500px; height: 600px;"></div>
        <table class="main">
            <tr>
                <td>№</td>
                <td>y(t)</td>
                <td>t</td>
                <td>y(t)t</td>
                <td>t^2</td>
                <td>y(t)t^2</td>
                <td>t^4</td>
                <td>ln(y(t))</td>
                <td>ln(y(t))t</td>
            </tr>
            {% for key, value in bigtable2.items %}
            <tr>
                <td>{{ key }}</td>
                <td>{{ value.0 }}</td>
                <td>{{ value.1 }}</td>
                <td>{{ value.2 }}</td>
                <td>{{ value.3 }}</td>
                <td>{{ value.4 }}</td>
                <td>{{ value.5 }}</td>
                <td>{{ value.6 }}</td>
                <td>{{ value.7 }}</td>
            </tr>
            {% endfor %}
        </table>
        Линейная модель = {{ line1 }} <br>
        Параболическая модель = {{ parabola1 }} <br>
        Показательная модель = {{ pokaz1 }}
        <br><br>
    </div>
    <div>
        <table class="main">
            <tr>
                <td>
                    t
                </td>
                {% for key, value in games.items %}
                    <td>{{ key }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td>
                    Yt
                </td>
                {% for key, value in games.items %}
                     <td>{{ value }}</td>
                {% endfor %}
            </tr>
        </table>
        <table class="main">
            <tr>
                <td>
                    t
                </td>
                {% for key, value in table31.items %}
                    <td>{{ key }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td>
                    Yt
                </td>
                {% for key, value in table31.items %}
                     <td>{{ value }}</td>
                {% endfor %}
            </tr>
        </table>
        Количество серий = {{ n31 }}
        <br>
        Длина самой длинной серии = {{ max31 }}
        <br>
        Медиана = {{ me3 }}
        <br>
        Проверка по притерию серий:
        <br>
        {{ n31 }} > {{ result1 }}
        <br>
        {{ max31 }} < {{ tautau }}
        <br>
        В итоге: {% if result31 %} Гипотеза об отсутствии тренда принимается {% else %} Гипотеза об отсутствии тренда отвергается {% endif %}
        <br><br>
        <table class="main">
            <tr>
                <td>
                    t
                </td>
                {% for key, value in table3.items %}
                    <td>{{ key }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td>
                    Yt
                </td>
                {% for key, value in table3.items %}
                     <td>{{ value }}</td>
                {% endfor %}
            </tr>
        </table>
        Количество серий = {{ n3 }}
        <br>
        Длина самой длинной серии = {{ max3 }}
        <br>
        Проверка по притерию "восходящих и нисходящих":
        <br>
        {{ n3 }} > {{ result2 }}
        <br>
        {{ max3 }} < {{ tau }}
        <br>
        В итоге: {% if result32 %} Гипотеза об отсутствии тренда принимается {% else %} Гипотеза об отсутствии тренда отвергается {% endif %}
        <br><br>
        <div id="line3" style="width: 1500px; height: 600px;"></div>
        <table class="main">
            <tr>
                <td>№</td>
                <td>y(t)</td>
                <td>t</td>
                <td>y(t)t</td>
                <td>t^2</td>
                <td>y(t)t^2</td>
                <td>t^4</td>
                <td>ln(y(t))</td>
                <td>ln(y(t))t</td>
            </tr>
            {% for key, value in bigtable3.items %}
            <tr>
                <td>{{ key }}</td>
                <td>{{ value.0 }}</td>
                <td>{{ value.1 }}</td>
                <td>{{ value.2 }}</td>
                <td>{{ value.3 }}</td>
                <td>{{ value.4 }}</td>
                <td>{{ value.5 }}</td>
                <td>{{ value.6 }}</td>
                <td>{{ value.7 }}</td>
            </tr>
            {% endfor %}
        </table>
        Линейная модель = {{ line1 }} <br>
        Параболическая модель = {{ parabola1 }} <br>
        Показательная модель = {{ pokaz1 }}

    </div>
</main>
{% endblock %}
{% block js %}
{% endblock %}